<!DOCTYPE HTML>
<!-- https://blog.mbaas.nifcloud.com/entry/2018/01/31/105041 このリンクを見ながら確認する -->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">

    <script>
      var applicationKey = "528ee002bcd19f4617c576d61aa8e2e5d08f2df2401f18c81ec40f20d680361c";
      var clientKey = "f2eb16be8cb269fca2e232362b566bc0f2efc644ea365330e26c44e8497d376b";
      var ncmb = new NCMB(applicationKey, clientKey);

      function clickFunc(){
        //insertの方法
        //ニフクラに作成したクラス（テーブル）をnew
        var UserData = ncmb.DataStore("userdata");
        var userDataClass = new UserData();

        userDataClass
        .set("username", document.getElementById("username").value)
        .set("password", document.getElementById("pass").value)
        .save()

        .then(function(object){
          alert("保存成功:" + JSON.stringify(object));
        })
        .catch(function(error){
          alert("保存失敗:" + JSON.stringify(error));
        });
      }

      function kensaku(){
        //selectの方法
        var SampleData = ncmb.DataStore("userdata");
        SampleData.fetchAll()
        .then(function(results){
          //console.log("取得成功:" + JSON.stringify(results));
          alert("取得成功:" + JSON.stringify(results));
          //各項目にアクセスする際 はresults[0].username; という風にアクセス
        })
        .catch(function(error){
          console.log("取得失敗:");
        });
      }
    </script>
  </head>
  <body>
    なまえ<input type="text" id="username"><br>
    ぱすわーど<input type="password" id="pass"><br>
    <button onclick="clickFunc();">実験</button>
    <button onclick="kensaku();">けんさく</button>
  </body>
</html>
